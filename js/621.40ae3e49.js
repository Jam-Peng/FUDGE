"use strict";(self["webpackChunkfudge"]=self["webpackChunkfudge"]||[]).push([[621],{3318:function(e,t,a){a.d(t,{Z:function(){return k}});var o=a(3396),s=a(7139),i=a(9242);const l={"aria-label":"Page navigation example "},n={class:"pagination justify-content-center mt-4"},c=(0,o._)("span",{"aria-hidden":"true"},"«",-1),d=[c],r=["onClick"],p=(0,o._)("span",{"aria-hidden":"true"},"»",-1),g=[p];function m(e,t,a,c,p,m){return(0,o.wg)(),(0,o.iD)("nav",l,[(0,o._)("ul",n,[(0,o._)("li",{class:(0,s.C_)(["page-item",{disabled:!1===a.pages.has_pre}])},[(0,o._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,i.iM)((e=>m.prePage(a.pages.current_page-1)),["prevent"]))},d)],2),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.pages.total_pages,(e=>((0,o.wg)(),(0,o.iD)("li",{class:(0,s.C_)(["page-item",{active:e===a.pages.current_page}]),key:e},[(0,o._)("a",{class:"page-link",href:"#",onClick:(0,i.iM)((t=>m.updatePage(e)),["prevent"])},(0,s.zw)(e),9,r)],2)))),128)),(0,o._)("li",{class:(0,s.C_)(["page-item",{disabled:!1===a.pages.has_next}])},[(0,o._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,i.iM)((e=>m.nextPage(a.pages.current_page+1)),["prevent"]))},g)],2)])])}var u={props:["pages"],emits:["emitPage","emitPre","emitNext"],methods:{updatePage(e){this.$emit("emitPage",e)},prePage(e){this.$emit("emitPre",e)},nextPage(e){this.$emit("emitNext",e)}}},b=a(89);const h=(0,b.Z)(u,[["render",m]]);var k=h},2621:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var o=a(3396),s=a(7139);const i={class:"shadow-sm p-3 mt-2 bg-body rounded"},l={class:"d-flex justify-content-between px-3"},n=(0,o._)("p",{class:"fs-3"},"文章列表",-1),c={class:"row justify-content-between px-3 mt-2"},d=["src"],r={class:"card-body py-2 mb-4"},p={class:"d-flex flex-column"},g={class:"card-title mb-1 ps-0"},m={class:"card-title mb-2"},u={class:"d-flex align-items-center ms-auto me-3"},b={key:0,class:"text-success me-4"},h={key:1,class:"text-danger me-4"},k={class:"btn-group"},_=["onClick"],v=["onClick"];function f(e,t,a,f,w,M){const x=(0,o.up)("OverLoading"),y=(0,o.up)("LookbookModal"),P=(0,o.up)("DeletebookModal"),C=(0,o.up)("PagiNation");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(x,{active:w.isLoading},null,8,["active"]),(0,o._)("div",i,[(0,o._)("div",null,[(0,o._)("div",l,[n,(0,o._)("span",null,[(0,o._)("button",{class:"btn btn-primary mt-1",type:"button",onClick:t[0]||(t[0]=(...e)=>M.openModal&&M.openModal(...e))}," 新增文章 ")])]),(0,o._)("div",c,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(w.articles,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"col-6 mt-2",key:t},[(0,o._)("div",null,[(0,o._)("img",{class:"card-img-top",src:t.firstImage,alt:"..."},null,8,d)]),(0,o._)("div",r,[(0,o._)("div",p,[(0,o._)("p",g,(0,s.zw)(e.$filters.endate(t.create_at)),1),(0,o._)("p",m,(0,s.zw)(t.title),1),(0,o._)("div",u,[t.isPublic?((0,o.wg)(),(0,o.iD)("span",b,"啟用")):((0,o.wg)(),(0,o.iD)("span",h,"不啟用")),(0,o._)("div",k,[(0,o._)("button",{class:"btn btn-outline-primary btn-sm",onClick:e=>M.checkLookbook(t.id)}," 檢視 ",8,_),(0,o._)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>M.openDeleteModal(t)}," 刪除 ",8,v)])])])])])))),128))])])]),(0,o.Wm)(y,{ref:"lookbookModal",article:w.tempArticle,onNewArticle:M.newLookbook},null,8,["article","onNewArticle"]),(0,o.Wm)(P,{ref:"deletebookModal",delArticle:w.tempArticle,onEmitDelete:M.deleteLookbook},null,8,["delArticle","onEmitDelete"]),(0,o.Wm)(C,{pages:w.pagination,onEmitPage:M.getlookbook,onEmitPre:M.getlookbook,onEmitNext:M.getlookbook},null,8,["pages","onEmitPage","onEmitPre","onEmitNext"])],64)}var w=a(8459);const M={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},x={class:"modal-dialog",role:"document"},y={class:"modal-content border-0"},P={class:"modal-header bg-danger text-white"},C={class:"modal-title"},D=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),$={class:"modal-body"},A=(0,o.Uk)(" 是否刪除 "),L={class:"text-danger"},N=(0,o.Uk)(" (刪除後將無法恢復)。 "),E={class:"modal-footer"},Z=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function z(e,t,a,i,l,n){return(0,o.wg)(),(0,o.iD)("div",M,[(0,o._)("div",x,[(0,o._)("div",y,[(0,o._)("div",P,[(0,o._)("h5",C,[(0,o._)("span",null,"刪除 "+(0,s.zw)(a.delArticle.title),1)]),D]),(0,o._)("div",$,[A,(0,o._)("strong",L,(0,s.zw)(a.delArticle.title),1),N]),(0,o._)("div",E,[Z,(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("emit-delete"))}," 確認刪除 ")])])])],512)}var W=a(1339),j={data(){return{modal:{}}},props:{delArticle:{}},emits:["emit-delete"],mixins:[W.Z]},H=a(89);const Y=(0,H.Z)(j,[["render",z]]);var K=Y,T=a(3318),U=a(9233),I=a(3766),O={components:{LookbookModal:w.Z,DeletebookModal:K,PagiNation:T.Z},data(){return{articles:[],pagination:{},tempArticle:{},isLoading:!1}},methods:{...(0,I.nv)(U.Z,["pushMessage"]),getlookbook(e=1){const t=`https://vue3-course-api.hexschool.io/api/pengplan-api/admin/articles?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{setTimeout((()=>{this.isLoading=!1}),500),this.articles=e.data.articles,this.pagination=e.data.pagination})).catch((e=>{console.log(e.response)}))},openModal(){this.tempArticle={create_at:(new Date).getTime()/1e3},this.$refs.lookbookModal.showModel()},newLookbook(e){this.tempArticle=e;const t="https://vue3-course-api.hexschool.io/api/pengplan-api/admin/article";this.$http.post(t,{data:this.tempArticle}).then((e=>{this.$refs.lookbookModal.hideModal(),this.getlookbook(),this.pushMessage(e.data.success,"新增文章",e.data.message)})).catch((e=>{console.log(e.response)}))},openDeleteModal(e){this.tempArticle=e,this.$refs.deletebookModal.showModel()},deleteLookbook(){const e=`https://vue3-course-api.hexschool.io/api/pengplan-api/admin/article/${this.tempArticle.id}`;this.$http.delete(e).then((e=>{this.$refs.deletebookModal.hideModal(),this.getlookbook(),this.pushMessage(e.data.success,"刪除文章",e.data.message)})).catch((e=>{console.log(e.response)}))},checkLookbook(e){this.$router.push(`lookbooks/${e}`)}},created(){this.getlookbook()}};const q=(0,H.Z)(O,[["render",f]]);var B=q}}]);
//# sourceMappingURL=621.40ae3e49.js.map