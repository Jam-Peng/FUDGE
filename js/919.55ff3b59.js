"use strict";(self["webpackChunkfudge"]=self["webpackChunkfudge"]||[]).push([[919],{3318:function(e,t,l){l.d(t,{Z:function(){return w}});var r=l(3396),d=l(7139),a=l(9242);const s={"aria-label":"Page navigation example "},n={class:"pagination justify-content-center mt-4"},i=(0,r._)("span",{"aria-hidden":"true"},"«",-1),o=[i],u=["onClick"],c=(0,r._)("span",{"aria-hidden":"true"},"»",-1),p=[c];function _(e,t,l,i,c,_){return(0,r.wg)(),(0,r.iD)("nav",s,[(0,r._)("ul",n,[(0,r._)("li",{class:(0,d.C_)(["page-item",{disabled:!1===l.pages.has_pre}])},[(0,r._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,a.iM)((e=>_.prePage(l.pages.current_page-1)),["prevent"]))},o)],2),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.pages.total_pages,(e=>((0,r.wg)(),(0,r.iD)("li",{class:(0,d.C_)(["page-item",{active:e===l.pages.current_page}]),key:e},[(0,r._)("a",{class:"page-link",href:"#",onClick:(0,a.iM)((t=>_.updatePage(e)),["prevent"])},(0,d.zw)(e),9,u)],2)))),128)),(0,r._)("li",{class:(0,d.C_)(["page-item",{disabled:!1===l.pages.has_next}])},[(0,r._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,a.iM)((e=>_.nextPage(l.pages.current_page+1)),["prevent"]))},p)],2)])])}var m={props:["pages"],emits:["emitPage","emitPre","emitNext"],methods:{updatePage(e){this.$emit("emitPage",e)},prePage(e){this.$emit("emitPre",e)},nextPage(e){this.$emit("emitNext",e)}}},g=l(89);const h=(0,g.Z)(m,[["render",_]]);var w=h},6919:function(e,t,l){l.r(t),l.d(t,{default:function(){return ut}});var r=l(3396),d=l(7139),a=l(9242);const s={class:"shadow-sm p-3 mt-2 bg-body rounded"},n=(0,r._)("div",{class:"d-flex justify-content-between px-3"},[(0,r._)("p",{class:"fs-3"},"訂單管理表")],-1),i={class:"table mt-2 align-middle"},o=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{class:"text-center"},"購買時間"),(0,r._)("th",null,"訂單編號"),(0,r._)("th",null,"購買款項"),(0,r._)("th",{class:"text-center"},"應付金額"),(0,r._)("th",{width:"120",class:"text-center"},"是否付款"),(0,r._)("th",null,"編輯")])],-1),u={class:"text-center"},c=["textContent"],p={class:"me-4"},_={key:0,class:"text-center"},m={key:1,class:"text-center"},g={class:"form-check form-switch ps-5"},h=["onUpdate:modelValue","onChange"],w={class:"form-check-label",for:"paidSwitch"},b={key:0},O={key:1},v={class:"btn-group"},y=["onClick"],k=["onClick"];function f(e,t,l,f,z,x){const M=(0,r.up)("OverLoading"),D=(0,r.up)("OrderModal"),C=(0,r.up)("DeleteOrderModal"),P=(0,r.up)("PagiNation");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(M,{active:z.isLoading},null,8,["active"]),(0,r._)("div",s,[n,(0,r._)("table",i,[o,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(z.orders,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id},[(0,r._)("td",u,(0,d.zw)(e.$filters.date(t.create_at)),1),(0,r._)("td",null,[(0,r._)("span",{textContent:(0,d.zw)(t.id)},null,8,c)]),(0,r._)("td",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.products,(e=>((0,r.wg)(),(0,r.iD)("ul",{class:"list-unstyled itemContain_text",key:e.id},[(0,r._)("li",null,(0,d.zw)(e.product.title),1),(0,r._)("li",null,[(0,r._)("span",p,"數量："+(0,d.zw)(e.qty),1),(0,r._)("span",null,"尺寸："+(0,d.zw)(e.size),1)])])))),128))]),t.user.originalTotal<1e3?((0,r.wg)(),(0,r.iD)("td",_,(0,d.zw)(e.$filters.currency(t.total+z.shippingFee)),1)):((0,r.wg)(),(0,r.iD)("td",m,(0,d.zw)(e.$filters.currency(t.total)),1)),(0,r._)("td",null,[(0,r._)("div",g,[(0,r.wy)((0,r._)("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch","onUpdate:modelValue":e=>t.is_paid=e,onChange:e=>x.updatePaid(t)},null,40,h),[[a.e8,t.is_paid]]),(0,r._)("label",w,[t.is_paid?((0,r.wg)(),(0,r.iD)("span",b,"已付款")):((0,r.wg)(),(0,r.iD)("span",O,"未付款"))])])]),(0,r._)("td",null,[(0,r._)("div",v,[(0,r._)("button",{class:"btn btn-outline-primary btn-sm",onClick:e=>x.openModal(!1,t)}," 檢視 ",8,y),(0,r._)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>x.deleteOrderModal(t)}," 刪除 ",8,k)])])])))),128))])])]),(0,r.Wm)(D,{ref:"orderModal",order:z.tempOrder},null,8,["order"]),(0,r.Wm)(C,{ref:"deleteModal",delOrder:z.tempOrder,onEmitDeleteOrder:x.deleteOrder},null,8,["delOrder","onEmitDeleteOrder"]),(0,r.Wm)(P,{pages:z.pagination,onEmitPage:x.getOrder,onEmitPre:x.getOrder,onEmitNext:x.getOrder},null,8,["pages","onEmitPage","onEmitPre","onEmitNext"])],64)}const z={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},x={class:"modal-dialog modal-xl",role:"document"},M={class:"modal-content border-0"},D=(0,r._)("div",{class:"modal-header bg-dark text-white"},[(0,r._)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,r._)("span",null,"訂單資料")]),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body p-4"},P={class:"row"},$={class:"col-md-4"},N={class:"mb-2"},q=(0,r._)("span",{class:"fw-semibold"},"訂購人",-1),E={class:"table mb-4"},L={class:"orderModal_contain"},T=(0,r._)("td",{style:{width:"90px"}},"姓名",-1),Z=(0,r._)("td",null,"Email",-1),H=(0,r._)("td",null,"電話",-1),S=(0,r._)("td",null,"國家",-1),Y=(0,r._)("td",null,"地址",-1),A=(0,r._)("td",null,"配送方式",-1),F=(0,r._)("td",null,"配送時間",-1),K={key:0,class:"mb-2"},U=(0,r._)("span",{class:"fw-semibold"},"收件人",-1),W={key:0,class:"ms-3"},j={key:1,class:"table mb-4"},I={class:"orderModal_contain"},V=(0,r._)("td",{style:{width:"90px"}},"姓名",-1),B=(0,r._)("td",null,"Email",-1),G=(0,r._)("td",null,"電話",-1),J=(0,r._)("td",null,"國家",-1),Q=(0,r._)("td",null,"地址",-1),R={key:1,class:"mb-2"},X=(0,r._)("span",{class:"fw-semibold"},"超商取貨",-1),ee={class:"table mb-4"},te={class:"orderModal_contain"},le=(0,r._)("td",{style:{width:"90px"}},"姓名",-1),re=(0,r._)("td",null,"電話",-1),de=(0,r._)("td",null,"國家",-1),ae=(0,r._)("td",null,"門市資訊",-1),se={class:"col-md-8"},ne=(0,r._)("span",{class:"fw-semibold"},"訂單付款資訊",-1),ie={class:"table mb-4"},oe={class:"orderModal_contain"},ue=(0,r._)("td",{style:{width:"100px"}},"訂單編號",-1),ce=(0,r._)("td",null,"下單時間",-1),pe=(0,r._)("td",null,"付款方式",-1),_e=(0,r._)("td",null,"發票形式",-1),me={key:0},ge=(0,r._)("td",null,"發票寄送地",-1),he={key:1},we=(0,r._)("td",null,"載具條碼",-1),be={key:2},Oe=(0,r._)("td",null,"捐贈單位",-1),ve=(0,r._)("td",null,"付款時間",-1),ye={key:0,class:"me-2"},ke={key:1,class:"text-success"},fe={key:2,class:"text-danger"},ze=(0,r._)("td",null,"付款狀態",-1),xe={key:0,class:"text-success"},Me={key:1,class:"text-danger"},De=(0,r._)("td",null,"總金額",-1),Ce={key:0},Pe={key:1},$e=(0,r._)("span",{class:"fw-semibold"},"訂購商品",-1),Ne={class:"table mb-4"},qe={class:"orderModal_contain"},Ee={class:"ms-4"},Le={class:"text-end"},Te={class:"modal-footer"},Ze=(0,r._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function He(e,t,l,a,s,n){return(0,r.wg)(),(0,r.iD)("div",z,[(0,r._)("div",x,[(0,r._)("div",M,[D,(0,r._)("div",C,[(0,r._)("div",P,[(0,r._)("div",$,[(0,r._)("div",N,[q,(0,r._)("table",E,[(0,r._)("tbody",L,[(0,r._)("tr",null,[T,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.name),1)]),(0,r._)("tr",null,[Z,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.email),1)]),(0,r._)("tr",null,[H,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.tel),1)]),(0,r._)("tr",null,[S,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.nation),1)]),(0,r._)("tr",null,[Y,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.city)+" "+(0,d.zw)(s.tempOrder.user.area)+(0,d.zw)(s.tempOrder.user.address),1)]),(0,r._)("tr",null,[A,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.userdeliverMethod),1)]),(0,r._)("tr",null,[F,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.deliverTime),1)])])])]),"宅配"===s.tempOrder.user.userdeliverMethod?((0,r.wg)(),(0,r.iD)("div",K,[U,"同購買人"===s.tempOrder.user.receiverInput?((0,r.wg)(),(0,r.iD)("span",W,(0,d.zw)(s.tempOrder.user.receiverInput),1)):(0,r.kq)("",!0),"不同購買人"===s.tempOrder.user.receiverInput?((0,r.wg)(),(0,r.iD)("table",j,[(0,r._)("tbody",I,[(0,r._)("tr",null,[V,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverName),1)]),(0,r._)("tr",null,[B,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverEmail),1)]),(0,r._)("tr",null,[G,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverTel),1)]),(0,r._)("tr",null,[J,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverNation),1)]),(0,r._)("tr",null,[Q,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverCity)+" "+(0,d.zw)(s.tempOrder.user.receiverArea)+(0,d.zw)(s.tempOrder.user.receiverAddress),1)])])])):(0,r.kq)("",!0)])):(0,r.kq)("",!0),"7-11超商取貨"===s.tempOrder.user.userdeliverMethod||"全家超商取貨"===s.tempOrder.user.userdeliverMethod?((0,r.wg)(),(0,r.iD)("div",R,[X,(0,r._)("table",ee,[(0,r._)("tbody",te,[(0,r._)("tr",null,[le,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverShopName),1)]),(0,r._)("tr",null,[re,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverShopTel),1)]),(0,r._)("tr",null,[de,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.receiverShopNation),1)]),(0,r._)("tr",null,[ae,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.clientLocation.name)+" "+(0,d.zw)(s.tempOrder.user.clientLocation.dress),1)])])])])):(0,r.kq)("",!0)]),(0,r._)("div",se,[ne,(0,r._)("table",ie,[(0,r._)("tbody",oe,[(0,r._)("tr",null,[ue,(0,r._)("td",null,(0,d.zw)(s.tempOrder.id),1)]),(0,r._)("tr",null,[ce,(0,r._)("td",null,(0,d.zw)(e.$filters.date(s.tempOrder.create_at)),1)]),(0,r._)("tr",null,[pe,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.userPayMethod),1)]),(0,r._)("tr",null,[_e,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.deliverTicket),1)]),"電子發票"===s.tempOrder.user.deliverTicket?((0,r.wg)(),(0,r.iD)("tr",me,[ge,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.deliverCity)+" "+(0,d.zw)(s.tempOrder.user.deliverArea)+(0,d.zw)(s.tempOrder.user.deliverAddress),1)])):(0,r.kq)("",!0),"電子發票(手機載具)"===s.tempOrder.user.deliverTicket?((0,r.wg)(),(0,r.iD)("tr",he,[we,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.mobileCode),1)])):(0,r.kq)("",!0),"捐贈發票"===s.tempOrder.user.deliverTicket?((0,r.wg)(),(0,r.iD)("tr",be,[Oe,(0,r._)("td",null,(0,d.zw)(s.tempOrder.user.invoiceDonate),1)])):(0,r.kq)("",!0),(0,r._)("tr",null,[ve,(0,r._)("td",null,[s.tempOrder.paid_date?((0,r.wg)(),(0,r.iD)("span",ye,(0,d.zw)(e.$filters.date(s.tempOrder.paid_date)),1)):(0,r.kq)("",!0),s.tempOrder.is_paid&&!s.tempOrder.paid_date?((0,r.wg)(),(0,r.iD)("strong",ke,"人工確認付款")):(0,r.kq)("",!0),s.tempOrder.paid_date||s.tempOrder.is_paid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",fe,"尚未付款"))])]),(0,r._)("tr",null,[ze,(0,r._)("td",null,[s.tempOrder.is_paid?((0,r.wg)(),(0,r.iD)("strong",xe,"已付款")):((0,r.wg)(),(0,r.iD)("span",Me,"尚未付款"))])]),(0,r._)("tr",null,[De,s.tempOrder.user.originalTotal<1e3?((0,r.wg)(),(0,r.iD)("td",Ce,(0,d.zw)(e.$filters.currency(s.tempOrder.total+s.shippingFee)),1)):((0,r.wg)(),(0,r.iD)("td",Pe,(0,d.zw)(e.$filters.currency(s.tempOrder.total)),1))])])]),$e,(0,r._)("table",Ne,[(0,r._)("tbody",qe,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.tempOrder.products,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id},[(0,r._)("td",null,(0,d.zw)(t.product.title),1),(0,r._)("td",null,[(0,r._)("span",null,"尺寸："+(0,d.zw)(t.size),1),(0,r._)("span",Ee,"數量："+(0,d.zw)(t.qty),1)]),(0,r._)("td",Le," NT."+(0,d.zw)(e.$filters.currency(t.final_total)),1)])))),128))])])])])]),(0,r._)("div",Te,[Ze,(0,r._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...t)=>e.hideModal&&e.hideModal(...t))}," 確認 ")])])])],512)}var Se=l(1339),Ye={data(){return{modal:{},tempOrder:{products:{},user:{clientLocation:{}}},shippingFee:80}},props:{order:{type:Object,default(){return{}}}},watch:{order(){this.tempOrder=this.order,this.tempOrder.user=this.order.user}},mixins:[Se.Z]},Ae=l(89);const Fe=(0,Ae.Z)(Ye,[["render",He]]);var Ke=Fe;const Ue={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},We={class:"modal-dialog",role:"document"},je={class:"modal-content border-0"},Ie={class:"modal-header bg-danger text-white"},Ve={class:"modal-title"},Be=(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Ge={class:"modal-body"},Je=(0,r.Uk)(" 是否刪除 "),Qe={class:"text-danger"},Re=(0,r.Uk)(" (刪除後將無法恢復)。 "),Xe={class:"modal-footer"},et=(0,r._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function tt(e,t,l,a,s,n){return(0,r.wg)(),(0,r.iD)("div",Ue,[(0,r._)("div",We,[(0,r._)("div",je,[(0,r._)("div",Ie,[(0,r._)("h5",Ve,[(0,r._)("span",null,"刪除 訂單編號："+(0,d.zw)(l.delOrder.id),1)]),Be]),(0,r._)("div",Ge,[Je,(0,r._)("strong",Qe,"訂單編號："+(0,d.zw)(l.delOrder.id),1),Re]),(0,r._)("div",Xe,[et,(0,r._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=t=>e.$emit("emit-deleteOrder"))}," 確認刪除 ")])])])],512)}var lt={data(){return{modal:{}}},props:{delOrder:{}},emits:["emit-deleteOrder"],mixins:[Se.Z]};const rt=(0,Ae.Z)(lt,[["render",tt]]);var dt=rt,at=l(3318),st=l(3766),nt=l(9233),it={components:{OrderModal:Ke,DeleteOrderModal:dt,PagiNation:at.Z},data(){return{orders:[],pagination:{},tempOrder:{},isNew:!1,isLoading:!1,shippingFee:80}},methods:{...(0,st.nv)(nt.Z,["pushMessage"]),getOrder(e=1){const t=`https://vue3-course-api.hexschool.io/api/pengplan-api/admin/orders?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{setTimeout((()=>{this.isLoading=!1}),500),e.data.success&&(this.orders=e.data.orders,this.pagination=e.data.pagination)})).catch((e=>{console.log(e.response)}))},openModal(e,t){!1===e&&(this.tempOrder={...t},this.$refs.orderModal.showModel())},updatePaid(e){const t=`https://vue3-course-api.hexschool.io/api/pengplan-api/admin/order/${e.id}`,l={is_paid:e.is_paid,total:e.total};this.$http.put(t,{data:l}).then((e=>{this.getOrder(),this.pushMessage(e.data.success,"更新付款狀態",e.data.message)})).catch((e=>{console.log(e.response)}))},deleteOrderModal(e){this.tempOrder={...e},this.$refs.deleteModal.showModel()},deleteOrder(){const e=`https://vue3-course-api.hexschool.io/api/pengplan-api/admin/order/${this.tempOrder.id}`;this.$http.delete(e).then((e=>{this.$refs.deleteModal.hideModal(),this.getOrder(),this.pushMessage(e.data.success,"刪除訂單",e.data.message)})).catch((e=>{console.log(e.response)}))}},created(){this.getOrder()}};const ot=(0,Ae.Z)(it,[["render",f]]);var ut=ot}}]);
//# sourceMappingURL=919.55ff3b59.js.map